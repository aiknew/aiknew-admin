enum StorageType {
  LOCAL
  S3
}

model FileStorage {
  id         String       @id @default(cuid(2))
  name       String       @db.VarChar(20)
  type       StorageType
  UploadFile UploadFile[]
  enable     Boolean      @default(false)
  accessKey  String?      @db.VarChar(50) // only s3 type
  secretKey  String?      @db.VarChar(50) // only s3 type
  endpoint   String?      @db.VarChar(50) // only s3 type
  bucket     String?      @db.VarChar(50) // only s3 type
  createdAt  DateTime     @default(now())
  updatedAt  DateTime     @updatedAt
}

model UploadFile {
  id            String      @id @default(cuid())
  channel       Int         @default(10) @db.SmallInt
  fileName      String      @db.VarChar(50)
  filePath      String      @db.VarChar(200)
  fileExt       String      @db.VarChar(10)
  fileSize      Int
  mime          String      @db.VarChar(50)
  originalName  String      @db.VarChar(255)
  order         Int         @default(10)
  groupId       String      @default("0")
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt
  uploader      AdminUser   @relation(fields: [uploaderId], references: [id])
  uploaderId    String
  storage       FileStorage @relation(fields: [fileStorageId], references: [id])
  fileStorageId String

  @@unique([originalName, groupId])
}
